import"./modulepreload-polyfill-9p4a8sJU.js";const y="/assets/hexagon-PDMO0t-Z.png",f="/assets/hexagon0-aLguqDrl.png",x="/assets/hexagon1-hPesuVIZ.png",E="/assets/hexagon2-GZ3cpzFs.png",I="/assets/hexagon3-RkGKDc-U.png",O="/assets/hexagon4-K4QcymyN.png",B="/assets/hexagon5-66_ttEJF.png";let a="wall";document.getElementById("wall").addEventListener("click",function(){a="wall",document.getElementById("selectedPreview").innerText="Selected Type: Wall"});document.getElementById("treasure").addEventListener("click",function(){a="treasure",document.getElementById("selectedPreview").innerText="Selected Type: Treasure"});document.getElementById("light").addEventListener("click",function(){a="light",document.getElementById("selectedPreview").innerText="Selected Type: Light"});let m=[f,x,E,I,O,B],z=[],u=[],d={level:z};class p{constructor(i,e,n,t){this.w=i,this.id=e,this.x=n,this.z=t,this.createDiv()}createDiv(){this.div=document.createElement("div"),this.img=document.createElement("img"),this.div.style.width=`${this.w}px`,this.div.style.position="absolute",this.div.id=`${this.id}`,this.img.src=y,this.img.width=100,this.div.append(this.img),this.div.xPosition=this.x,this.div.zPosition=this.z,this.div.dirOut=0,this.div.dirIn=0,this.div.onclick=function(){let i=this.id,e=this;if(u.includes(this.id))d.level.find(function(n,t){n.id==i&&(d.level[t].dirOut++,d.level[t].dirOut=d.level[t].dirOut%6,d.level[t].type=a,e.children[0].src=m[d.level[t].dirOut])});else{let n={};if(u.push(this.id),u[0]==this.id)n={id:this.id,x:this.xPosition,z:this.zPosition,dirOut:this.dirOut,dirIn:"start",type:a};else{let t=0;u.find(function(s,o){s==i&&(t=(d.level[o-1].dirOut+3)%6)}),n={id:this.id,x:this.xPosition,z:this.zPosition,dirOut:this.dirOut,dirIn:u[0]!=this.id?t:"start",type:a}}e.children[0].src=m[0],d.level.push(n)}document.getElementById("jsondata").innerText=JSON.stringify(d,null,2)}}getRoot(){return this.div}setXY(i,e){this.div.style.left=`${i}px`,this.div.style.top=`${e}px`}}class T{constructor(i,e,n,t,s,o,h,g){d={level:g},this.w=i,this.id=e,this.x=n,this.z=t,this.dirOut=s,this.dirIn=o,this.type=h,this.createDiv()}createDiv(){this.div=document.createElement("div"),this.img=document.createElement("img"),this.div.style.width=`${this.w}px`,this.div.style.position="absolute",this.div.id=`${this.id}`,this.img.src=m[this.dirOut],this.img.width=100,this.div.append(this.img),this.div.xPosition=this.x,this.div.zPosition=this.z,this.div.dirOut=this.dirOut,this.div.dirIn=this.dirIn,this.div.type=this.type,u.push(this.id),this.div.onclick=function(){let i=this.id,e=this;d.level.find(function(n,t){n.id==i&&(d.level[t].dirOut++,d.level[t].dirOut=d.level[t].dirOut%6,d.level[t].type=a,e.children[0].src=m[d.level[t].dirOut])}),document.getElementById("jsondata").innerText=JSON.stringify(d,null,2)}}getRoot(){return this.div}setXY(i,e){this.div.style.left=`${i}px`,this.div.style.top=`${e}px`}}for(let l=1;l<9;l++){let i=document.createElement("option");i.value=l,i.text=l,l==5&&(i.selected=l),document.getElementById("size").append(i)}let c=5;document.body.onload=function(){let i=1;document.getElementById("game").innerHTML="";let e=50;c=document.getElementById("size").value,d.size=c;for(let n=0;n<c;n++){let t=50;for(let s=0;s<c;s++){n%2!=0&&s==0&&(t+=50);let o=new p(100,i,n,s);o.setXY(e,t),document.getElementById("game").append(o.getRoot()),t+=100,i++}e+=100}};document.getElementById("size").onchange=function(){let i=1;document.getElementById("game").innerHTML="";let e=50;c=document.getElementById("size").value,d.size=c;for(let n=0;n<c;n++){let t=50;for(let s=0;s<c;s++){n%2!=0&&s==0&&(t+=50);let o=new p(100,i,n,s);o.setXY(e,t),document.getElementById("game").append(o.getRoot()),t+=100,i++}e+=100}};document.getElementById("sendToServer").addEventListener("click",function(){let l=JSON.parse(document.getElementById("jsondata").innerText);const i=JSON.stringify({json:l});fetch("/saveFile",{method:"POST",headers:{"Content-Type":"application/json"},body:i})});document.getElementById("loadFromFile").addEventListener("click",function(){document.getElementById("game").innerHTML="";const l=JSON.stringify({ask:"Send"});fetch("/loadSave",{method:"POST",headers:{"Content-Type":"application/json"},body:l}).then(e=>e.json()).then(e=>{console.log(e),document.getElementById("jsondata").innerText=JSON.stringify(e,null,2);let n=1,t=50;c=e.size;for(let s=0;s<c;s++){let o=50;for(let h=0;h<c;h++){s%2!=0&&h==0&&(o+=50);let g=!1;if(e.level.find(function(r){if(r.x==s&&r.z==h){let v=new T(100,n,s,h,r.dirOut,r.dirIn,r.type,e.level);v.setXY(t,o),console.log(v.getRoot()),document.getElementById("game").append(v.getRoot()),o+=100,n++,g=!0}}),!g){let r=new p(100,n,s,h);r.setXY(t,o),document.getElementById("game").append(r.getRoot()),o+=100,n++}}t+=100}})});
